# HexaGlue Classification Profile - Repository-Aware
#
# This profile fixes the classification of repository-type ports that have
# "plural" names (Orders, Customers, Products) instead of the Repository suffix.
#
# Problem solved:
#   - Ports like "Orders" with CRUD methods (save, findById, delete)
#     were classified as DRIVING/COMMAND due to command patterns
#   - These ports should be classified as DRIVEN/REPOSITORY
#
# Solution:
#   - Increase the priority of criteria that detect repositories
#   - Slightly lower the priority of CQRS patterns
#
# Usage:
#   CriteriaProfile profile = YamlCriteriaProfile.fromResource("profiles/repository-aware.yaml");

priorities:
  # =====================================================================
  # PORT CLASSIFICATION CRITERIA - OVERRIDES
  # =====================================================================

  # Semantic criteria (unchanged, highest priority after annotations)
  port.semantic.driving: 85
  port.semantic.driven: 85

  # Naming criteria (unchanged)
  port.naming.repository: 80
  port.naming.useCase: 80
  port.naming.gateway: 80

  # FIX: Increase signature-based detection to identify repositories
  # by their signatures (save/find methods with identity-bearing types)
  # Priority increased from 70 → 78 to win over CQRS patterns
  port.signature.drivenPort: 78

  # FIX: Lower CQRS patterns so they do not dominate
  # driven port detection criteria
  # Priority lowered from 75 → 72
  port.pattern.command: 72
  port.pattern.query: 72

  # Injection relationship (unchanged)
  port.relationship.injectedAsDependency: 75

  # FIX: Increase package-based detection for ports in .out
  # Priority increased from 60 → 74 to win over CQRS patterns
  port.package.out: 74
  port.package.in: 60
